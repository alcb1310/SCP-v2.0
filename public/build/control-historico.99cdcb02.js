"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[576],{3934:(t,a,e)=>{var r=e(538),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"form-group border shadow p-4"},[e("button",{staticClass:"btn btn-primary float-end mb-2",on:{click:function(a){return t.buscaDatos(a)}}},[t._v("\n      Buscar\n    ")]),t._v(" "),e("form",[e("div",{staticClass:"form-row"},[e("div",{staticClass:"col"},[e("label",{staticClass:"form-label",attrs:{for:"obra-vue"}},[t._v("Obra")]),t._v(" "),e("select",{staticClass:"form-select select2",attrs:{name:"obra-vue",id:"obra-vue"},on:{change:function(a){return t.selectedObra(a)}}},[e("option",{attrs:{value:""}},[t._v("--- Seleccione una obra ---")]),t._v(" "),t._l(t.obras,(function(a){return e("option",{key:a["@id"],domProps:{value:a.id}},[t._v("\n              "+t._s(a.nombre)+"\n            ")])}))],2)]),t._v(" "),e("div",{staticClass:"col"},[e("label",{staticClass:"form-label",attrs:{for:"fecha"}},[t._v("Fecha:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fecha,expression:"fecha"}],staticClass:"form-control",attrs:{type:"date",name:"fecha",id:"fecha"},domProps:{value:t.fecha},on:{input:function(a){a.target.composing||(t.fecha=a.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isValid,expression:"!isValid"}],staticClass:"invalid-feedback",attrs:{id:"obra-vueFeedback"}},[t._v("\n          "+t._s(t.error)+"\n        ")])])])]),t._v(" "),t.controlActual?e("div",{staticClass:"mt-4 shadow border"},[e("div",{staticClass:"pt-4 ps-4"},[t._m(1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-9"},[e("p",[t._v("\n            Obra: "),e("span",{staticClass:"text text-success"},[t._v(t._s(t.nombreObra))])])]),t._v(" "),e("div",{staticClass:"col-3"},[e("p",[t._v("\n            Fecha: "),e("span",{staticClass:"text text-success"},[t._v(t._s(t.fecha))])])])])]),t._v(" "),e("display-control",{attrs:{presupuestos:t.controlActual}})],1):t._e()])};n._withStripped=!0;e(1539),e(8674),e(5666);var s=e(9854),o=e(5009),i=e(6771),c=e(6715);function l(t,a,e,r,n,s,o){try{var i=t[s](o),c=i.value}catch(t){return void e(t)}i.done?a(c):Promise.resolve(c).then(r,n)}function v(t){return function(){var a=this,e=arguments;return new Promise((function(r,n){var s=t.apply(a,e);function o(t){l(s,r,n,o,i,"next",t)}function i(t){l(s,r,n,o,i,"throw",t)}o(void 0)}))}}const u={name:"ControlActual",components:{DisplayControl:i.Z},data:function(){return{controlActual:null,obras:null,obraSelected:"",error:"",fecha:null}},created:function(){var t=this;return v(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,o.r)();case 2:e=a.sent,t.obras=e.data["hydra:member"];case 4:case"end":return a.stop()}}),a)})))()},methods:{selectedObra:function(t){this.obraSelected=document.getElementById("obra-vue").value},buscaDatos:function(t){var a=this;return v(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.obraSelected||alert("Seleccione una obra"),t.next=3,(0,s.B)(a.obraSelected,fecha.value);case 3:e=t.sent,r=(0,c.S)(e.data["hydra:member"],a.obraSelected),a.controlActual=(0,c.c)(r,document.getElementById("nivel-vue").value);case 6:case"end":return t.stop()}}),t)})))()},filterNivel:function(){}},computed:{isValid:function(){return!this.error},nombreObra:function(){var t=document.getElementById("obra-vue");return t.options[t.selectedIndex].text}}};var d=(0,e(1900).Z)(u,n,[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col"},[e("label",{staticClass:"from-label",attrs:{for:"nivel"}},[t._v("Nivel:")]),t._v(" "),e("select",{staticClass:"form-control",attrs:{name:"nivel-vue",id:"nivel-vue"}},[e("option",{attrs:{value:""}},[t._v("--- Seleccione un nivel ---")]),t._v(" "),e("option",{attrs:{value:"1"}},[t._v("1")]),t._v(" "),e("option",{attrs:{value:"2"}},[t._v("2")]),t._v(" "),e("option",{attrs:{value:"3"}},[t._v("3")]),t._v(" "),e("option",{attrs:{value:"4"}},[t._v("4")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",[t._v("Control HistÃ³rico")])])])}],!1,null,null,null);d.options.__file="assets/pages/control-fecha.vue";const _=d.exports;new r.Z({render:function(t){return t(_)}}).$mount("#app")},6715:(t,a,e)=>{function r(t,a){for(var e=t.length,r=new Array,n=0;n<e;n++)t[n].nivel<=a&&r.push(t[n]);return r}function n(t,a){for(var e=t.length,r=new Array,n=0;n<e;n++)t[n].obra.id==a&&r.push(t[n]);return r}e.d(a,{c:()=>r,S:()=>n})},6475:(t,a,e)=>{e.d(a,{Z:()=>r});const r=function(t){return t.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})}},9854:(t,a,e)=>{e.d(a,{V:()=>s,B:()=>o});var r=e(9669),n=e.n(r);function s(t){return n().get("/api/presupuestos",{params:{obra:t}})}function o(t,a){return n().get("/api/controls/",{params:{fecha:a}})}},5009:(t,a,e)=>{e.d(a,{r:()=>s});var r=e(9669),n=e.n(r);function s(){return n().get("/api/obras",{params:{activo:!0}})}},6771:(t,a,e)=>{e.d(a,{Z:()=>i});var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),e("tbody",t._l(t.presupuestos,(function(a){return e("tr",{key:a["@id"]},[e("td",[t._v(t._s(a.partida.nombre))]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v("\n          "+t._s(a.cantini?t.format(a.cantini):"")+"\n        ")]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v("\n          "+t._s(a.costoini?t.format(a.costoini):"")+"\n        ")]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v(t._s(t.format(a.totalini)))]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v("\n          "+t._s(a.rendidocant?t.format(a.rendidocant):"")+"\n        ")]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v(t._s(t.format(a.rendidotot)))]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v("\n          "+t._s(a.porgascan?t.format(a.porgascan):"")+"\n        ")]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v("\n          "+t._s(a.porgascost?t.format(a.porgascost):"")+"\n        ")]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v(t._s(t.format(a.porgastot)))]),t._v(" "),e("td",{attrs:{align:"right"}},[t._v(t._s(t.format(a.presactu)))])])})),0)])])};r._withStripped=!0;var n=e(6475);const s={name:"DisplayControl",props:{presupuestos:{type:Array,default:null}},methods:{format:function(t){return(0,n.Z)(t)}}};var o=(0,e(1900).Z)(s,r,[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("td",{staticClass:"align-middle",attrs:{rowspan:"2",align:"center"}},[t._v("Partida")]),t._v(" "),e("td",{attrs:{colspan:"3",align:"center"}},[t._v("Inicial")]),t._v(" "),e("td",{attrs:{colspan:"2",align:"center"}},[t._v("Rendido")]),t._v(" "),e("td",{attrs:{colspan:"3",align:"center"}},[t._v("Por Gastar")]),t._v(" "),e("td",{staticClass:"align-middle",attrs:{rowspan:"2",align:"center"}},[t._v("\n          Presupuesto Actualizado\n        ")])]),t._v(" "),e("tr",[e("td",{attrs:{align:"center"}},[t._v("Cantidad")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Unitario")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Total")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Cantidad")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Total")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Cantidad")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Unitario")]),t._v(" "),e("td",{attrs:{align:"center"}},[t._v("Total")])])])}],!1,null,null,null);o.options.__file="assets/components/displayControl.vue";const i=o.exports}},t=>{t.O(0,[714,239],(()=>{return a=3934,t(t.s=a);var a}));t.O()}]);